# OneLap到行者(XOSS)数据同步工具

这是一个用于从OneLap平台下载运动数据并同步到行者(XOSS)平台的自动化工具。

## 功能特性

- 自动登录OneLap和行者平台
- 智能同步：只同步比行者最新活动更新的OneLap活动
- 支持批量下载和上传FIT文件
- 自动处理文件格式转换
- 详细的日志记录
- 可配置的批处理大小和文件大小限制

## 安装要求

### Python依赖
```bash
pip install DrissionPage requests bs4
```

### 系统要求
- Python 3.7+
- Chrome浏览器（用于自动化操作）

## 配置说明

1. 修改 `settings.ini` 配置文件中的两个平台的账号和密码
```
[onelap]
# OneLap平台账号信息
username = 139xxxxxx
password = xxxxxx

[xoss]
# 行者平台账号信息  
username = 139xxxxxx
password = xxxxxx

```

2. 其他可选配置：
   - `STORAGE_DIR`: 文件存储目录（默认: './downloads'）
   - `HEADLESS_MODE`: 无头模式（默认: True）
   - `MAX_FILES_PER_BATCH`: 每批上传文件数（默认: 5）
   - `MAX_FILE_SIZE`: 最大文件大小限制（默认: 50MB）

## 使用方法

1. 确保已正确配置 `config.py` 文件
2. 运行同步工具：
```bash
python SyncOnelapToXoss.py
```

## 工作流程

1. **登录验证**: 自动登录OneLap和行者平台
2. **数据获取**: 获取OneLap活动列表和行者最新活动记录
3. **智能筛选**: 只下载比行者最新活动更新的OneLap活动
4. **文件下载**: 批量下载FIT文件到本地存储目录
5. **文件上传**: 分批上传文件到行者平台
6. **清理**: 自动清理临时文件

## 日志说明

工具会生成详细的日志信息，包括：
- 登录状态
- 活动筛选结果
- 文件下载进度
- 上传状态
- 错误信息

## 注意事项

1. 请确保网络连接稳定
2. 首次运行可能需要手动处理验证码
3. 建议在非高峰期运行以避免平台限制
4. 定期检查日志文件以监控同步状态

## 故障排除

### 常见问题

1. **登录失败**: 检查账号密码是否正确
2. **下载失败**: 检查网络连接和OneLap平台状态
3. **上传失败**: 检查行者平台状态和文件格式

### 调试模式

设置 `LOG_LEVEL = 'DEBUG'` 可以获取更详细的日志信息。

## 许可证

本项目仅供个人学习和使用，请遵守相关平台的使用条款。 